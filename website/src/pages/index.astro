---
import Layout from '../layouts/Layout.astro';
import Nav from '../components/Nav.astro';
import Hero from '../components/Hero.astro';
import SkillGroup from '../components/SkillGroup.astro';
import JsonEndpoint from '../components/JsonEndpoint.astro';
import Footer from '../components/Footer.astro';

import catalog from '../data/skills-catalog.json';
import definitionsCatalog from '../data/definitions-catalog.json';

const featuredProviderIds = ['anthropic', 'openai', 'google', 'mistral', 'cohere'];

const featuredProviders = featuredProviderIds
  .map((id) => definitionsCatalog.providers.find((p) => p.id === id)?.name)
  .filter(Boolean)
  .slice(0, 6);

const fallbackProviders = definitionsCatalog.providers.slice(0, 6).map((p) => p.name);
const providerBadges = featuredProviders.length > 0 ? featuredProviders : fallbackProviders;
---

<Layout title="LLMSPEC — Curated LLM Skills">
  <Nav />
  <Hero />

  <!-- Skills Preview Section -->
  <section class="max-w-7xl mx-auto px-6 md:px-8 py-24">
    <!-- Section intro -->
    <div class="text-center mb-20 reveal">
      <p class="tracking-luxury text-gold-muted text-xs mb-4 font-sans">THE COLLECTION</p>
      <h2 class="font-serif text-display-sm md:text-display text-cream font-light">Skills</h2>
      <p class="font-sans text-cloud/70 text-base mt-6 max-w-2xl mx-auto">
        {catalog.total_skills} meticulously crafted skills across {catalog.groups.length} disciplines.
        Each skill is a self-contained package — ready to download, ready to deploy.
      </p>
      <div class="gold-rule max-w-xs mx-auto mt-8"></div>
    </div>

    <!-- Show ALL groups with all their skills -->
    {catalog.groups.map((group) => (
      <SkillGroup
        name={group.name}
        slug={group.slug}
        skillCount={group.skill_count}
        skills={group.skills}
      />
    ))}
  </section>

  <JsonEndpoint />

  <!-- Definitions Preview -->
  <section class="max-w-4xl mx-auto px-6 md:px-8 py-24 text-center reveal">
    <p class="tracking-luxury text-gold-muted text-xs mb-4 font-sans">THE COLLECTION</p>
    <h2 class="font-serif text-heading text-cream font-light">Definitions</h2>
    <p class="font-sans text-cloud/70 text-sm mt-4 max-w-2xl mx-auto">
      {definitionsCatalog.total_models} model definitions across {definitionsCatalog.total_providers}{' '}
      providers — capabilities, pricing, context limits.
    </p>

    <div class="mt-8 flex flex-wrap justify-center gap-2">
      {providerBadges.map((name) => (
        <span class="bg-slate/30 text-silver text-xs px-3 py-1 rounded-full border border-ash/30">
          {name}
        </span>
      ))}
    </div>

    <div class="gold-rule max-w-[80px] mx-auto mt-10"></div>

    <a
      href="/definitions/"
      class="mt-10 inline-flex items-center justify-center border border-gold text-gold hover:bg-gold hover:text-midnight transition-all duration-300 py-3 px-8 font-sans text-sm tracking-widest-plus uppercase"
    >
      Browse Definitions
    </a>
  </section>

  <Footer />
</Layout>
